v1.0.25 (2026-02-27)

* Redesign `git-snapshot list` human output for long snapshot IDs:
  - print each snapshot as two lines (`ID` line + labeled details line)
  - include a blank line between snapshot entries for readability.

* Keep root/auto indicators in the details line:
  - show `Root: <path>` when visible snapshots are not all from current root
  - show `Auto: *` for auto-generated snapshots in `--include-auto` mode.

* Update help/README/skill contract text and list-format regression tests
  to match the new multiline human output format.

v1.0.24 (2026-02-27)

* Improve `git-snapshot reset-all` defaults and naming:
  - change interactive snapshot-choice prompt default to yes (`[Y/n]`)
  - rename auto snapshot id prefix from `before-reset-all-*` to `pre-reset-*`.

* Improve `git-snapshot list` readability:
  - widen the `ID` column for long snapshot names
  - print a blank line before the hidden-auto hint message.

* Update help/docs/skill contract text and tests for the new reset-all
  prompt/default and auto snapshot prefix.

v1.0.23 (2026-02-27)

* Improve `git-snapshot list` readability:
  - widen the `Repos` column for cleaner alignment.
  - add a blank line before the shared-registry note in list output.

v1.0.22 (2026-02-27)

* Refine `git-snapshot list` root-column visibility rule:
  - show `Root` when visible snapshots are not all from current root
  - hide `Root` only when all visible snapshots belong to current root.

* Preserve explicit newest-first list ordering across roots by
  `created_at_epoch` descending.

* Add regression coverage for single-foreign-root listing:
  - listing from one same-name repo while visible snapshots come only from
    the other copy now keeps the `Root` column visible.

* Update help/README/skill contract text to match the final root-column rule.

v1.0.21 (2026-02-27)

* Document and surface shared snapshot-registry behavior for same-name repos:
  - snapshot registry remains keyed by root repo folder name
  - human `list` output always prints an explicit note about this behavior.

* Improve `git-snapshot list` root visibility ergonomics:
  - show `Root` column only when visible snapshots come from multiple root paths
  - keep default single-root lists compact (no redundant root column).

* Keep list ordering newest-first across all visible snapshots:
  - explicit sort by `created_at_epoch` descending regardless of snapshot root.

* Update help/docs/skill contract and add regression coverage for:
  - conditional root-column rendering
  - shared-name multi-root registry listing
  - newest-first ordering across roots.

v1.0.20 (2026-02-27)

* Add `git-snapshot reset-all` for clear-in-place workflows with optional
  pre-clear auto snapshot creation.

* Add explicit snapshot-choice flags for automation:
  - `--snapshot` to create an auto snapshot (`before-reset-all-*`, origin=`auto`)
  - `--no-snapshot` to clear without snapshot creation
  - interactive prompt only when neither flag is provided
  - mutual-exclusion validation for conflicting flags.

* Add porcelain output for `reset-all`:
  - `reset_all_snapshot` row with snapshot decision/result
  - `reset_all_summary` row with clear totals and exit-code signaling.

* Refactor clear execution internals so `create --clear` and `reset-all`
  share the same best-effort clear engine and drift/failure accounting.

* Update help/README/skill command contracts and add full regression coverage
  for reset-all behavior, non-interactive enforcement, conflict handling, and
  porcelain schema.

v1.0.19 (2026-02-27)

* Add snapshot origin metadata (`user` vs `auto`) to snapshot metadata and
  propagate it through rename and metadata loading.

* Mark restore safety snapshots as auto-generated.

* Update `git-snapshot list` to reduce noise by default:
  - hide auto-generated snapshots from default list output
  - add `--include-auto` to show all snapshots
  - print hidden auto-snapshot count hint in default human mode.

* Add list origin visibility improvements:
  - include `Auto` marker column (`*`) in human mode when `--include-auto` is used
  - include `origin=<user|auto>` in porcelain list rows.

* Update help/docs/skill contract and add regression coverage for list filtering,
  hint messaging, include-auto behavior, and porcelain origin fields.

v1.0.18 (2026-02-27)

* Change `git-snapshot restore` default conflict policy to reject mode:
  - default behavior now matches `--on-conflict reject`
  - rejected tracked hunks are left as `*.rej` for manual resolution
  - untracked path collisions are preserved and reported
  - partial restore in reject mode exits with code `4`.

* Keep explicit rollback mode for atomic semantics:
  - `--on-conflict rollback` retains automatic rollback-on-failure behavior.

* Add restore porcelain support for automation:
  - add `--porcelain` for restore with stable `restore_*` records
  - include per-repo status, reject/collision rows, rollback rows, and summary.

* Harden restore porcelain hard-failure schema:
  - normalize hard-failure rows to always emit both `repo` and `reason`
    fields, including status-hash mismatch failures.

* Update help/docs/skill contract and regression coverage for new restore
  defaults, conflict modes, exit codes, and porcelain behavior.

v1.0.17 (2026-02-26)

* Fix restore verification ordering in nested submodule trees:
  - restore now applies bundles for all repos first, then verifies status-hash
    parity in a second pass.
  - prevents false status-hash mismatches caused by parent repo verification
    running before child submodule state is restored.

* Harden restore regression coverage:
  - expand `test-restore-exact.sh` drift setup to reset/clean nested submodules
    before restore verification.

v1.0.16 (2026-02-26)

* Hard cut `inspect` file-limit flags:
  - remove `inspect --limit <n>`
  - remove `inspect --no-limit`
  - keep inspect detail output unlimited by default.

* Update `inspect` usage/help/docs/skill references to remove the limit options.

* Update verify mismatch follow-up guidance to stop suggesting removed inspect
  limit flags.

* Update regression tests to enforce:
  - inspect limit flags are rejected as unknown options
  - help/docs no longer advertise inspect limit flags.

v1.0.15 (2026-02-26)

* Breaking CLI update for snapshot inspection:
  - remove `git-snapshot show` entirely (hard cut, no compatibility alias)
  - standardize inspection on `git-snapshot inspect`.

* Change `inspect` default behavior to immediate stat-focused detail:
  - default render mode is now `--stat`
  - summary remains, followed by per-repo detail sections.

* Simplify inspect render flags:
  - remove `--files`
  - rename `--patch` to `--diff`
  - keep `--name-only` and `--stat`.

* Update verify mismatch follow-up guidance to new inspect flags:
  - suggest `--name-only` for full file inventories
  - suggest `--diff` for tracked patch bodies.

* Update README, shared skill contract, and regression tests to match the new
  command model and enforce hard removal of `show`.

v1.0.14 (2026-02-26)

* Breaking CLI rename:
  - `git-snapshot diff` -> `git-snapshot inspect`
  - `git-snapshot compare` -> `git-snapshot restore-check`
  - hard cut with no compatibility aliases for old names.

* Rename corresponding porcelain prefixes for consistency:
  - `diff`/`diff_file` -> `inspect`/`inspect_file`
  - `compare`/`compare_file` -> `restore_check`/`restore_check_file`.

* Update help/docs/skills/tests to reflect the new command names.

* Keep `verify` mismatch guidance aligned with new names:
  - follow-up commands now suggest `inspect` and `restore-check`.

v1.0.13 (2026-02-26)

* Move root-repo display normalization to a shared UI helper so human-facing
  output consistently shows the root folder name instead of `.`.

* Apply the shared root-label rule to additional runtime paths:
  - restore warnings/errors
  - clear failure summaries
  - verify mismatch/warning lines.

* Improve `verify` mismatch readability with concise snapshot-vs-current file
  previews for staged/unstaged/untracked differences.

* Expand regression coverage for root-label consistency and verify mismatch
  diagnostics in restore/verify tests.

v1.0.12 (2026-02-26)

* Add post-success `verify` hint in default mode explaining how to run
  `--strict-head` and why strict mode can be useful.

* Clarify strict-head guarantee in output: when strict verify passes, tracked +
  untracked non-ignored snapshot scope is exact (ignored files remain out of scope).

* Add regression assertions for verify hint behavior in default vs strict mode.

v1.0.11 (2026-02-26)

* Suppress non-actionable Git whitespace warning noise during `restore` patch
  application by applying snapshot patches with `--whitespace=nowarn`.

* Preserve restore safety behavior: patch format validation, apply checks,
  status-hash verification, and rollback logic remain unchanged.

* Add regression coverage to ensure restore output does not surface trailing
  whitespace warning spam when snapshot patches contain trailing spaces.

v1.0.10 (2026-02-26)

* Add `git-snapshot verify <snapshot_id>` to validate snapshot working-set
  parity against current state (staged/unstaged patch bytes and untracked
  non-ignored set+content), with mismatch exit code `3`.

* Add optional `--strict-head` mode for `verify`:
  - default mode keeps HEAD mismatch as warning-only (non-fatal)
  - strict mode promotes HEAD mismatch to failure when commit identity matters.

* Wire `verify` into CLI dispatch and expand help/docs/skill references to
  clarify default vs strict-head semantics and selection guidance.

* Add regression coverage for `verify` behavior:
  - default warning-only head mismatch
  - strict-head mismatch failure
  - staged/unstaged/untracked mismatch detection
  - porcelain verify output.

v1.0.9 (2026-02-26)

* Add `git-snapshot create --clear` workflow for interrupt-and-switch use:
  - snapshot-first capture, then clear (`reset --hard` + `clean -fd`)
  - interactive confirmation (`[y/N]`) by default
  - non-interactive bypass via `--yes` or `GIT_SNAPSHOT_CONFIRM_CLEAR=YES`

* Add best-effort clear behavior with per-repo failure reporting and non-zero
  exit on clear failures, while still printing snapshot id as final output line
  for immediate rollback availability.

* Add warning-only reporting for submodule HEAD drift under `--clear` (no
  forced submodule checkout/update alignment).

* Document both primary usage scenarios (blast-radius checkpoint and
  interrupt-and-switch) in README and workflow skill references.

v1.0.8 (2026-02-26)

* Change auto-generated snapshot id format to a readable timestamp-first form:
  - `YYYY-MM-DD--HH-MM-SS`
  - collision suffixes: `-02`, `-03`, ...

* Keep `create` custom-id behavior unchanged and update docs/help references to
  the new default id scheme.

v1.0.7 (2026-02-26)

* Improve human readability for `git-snapshot` repo labels:
  - show root repo by folder name instead of `.` in `show`, `diff`, and `compare`.

* Reformat `diff` and `compare` human repo summary rows to two-line entries so
  counters/signals are easier to scan in narrow terminals.

v1.0.6 (2026-02-26)

* Add `git-snapshot rename <old_snapshot_id> <new_snapshot_id>` to rename
  snapshot ids without recapturing snapshot content.

* Preserve snapshot creation metadata during rename and rewrite metadata to the
  new id for consistent `list`/`show` output.

* Add `rename --porcelain` machine output:
  - `renamed\told_id=<old>\tnew_id=<new>`

* Expand tests for rename success/failure scenarios, nested-PWD scope behavior,
  and help/docs command coverage.

v1.0.5 (2026-02-26)

* Harden snapshot metadata loading by removing shell `source` parsing from
  `meta.env`; add explicit key parsing and safe legacy-value decode support.

* Add untracked tar safety validation during restore; reject unsafe archive
  entries (absolute paths / traversal) before extraction.

* Fix commit-relation parsing portability in `compare` (`git rev-list --left-right --count`)
  to avoid tab-delimiter corruption in ahead/behind counts.

* Expand regression coverage for:
  - safe metadata loading against command-substitution payloads
  - restore rejection + rollback on unsafe untracked tar entries
  - diff/compare detail limiting and compare output integrity

v1.0.4 (2026-02-26)

* Streamline `git-snapshot diff` and `git-snapshot compare` default human output
  to summary-first mode:
  - show changed/issue-focused repo summaries by default
  - hide clean/noise-heavy repo sections unless explicitly requested
  - provide clear hints for drilling down into details

* Add detail controls for diff/compare:
  - `--all-repos`
  - `--details` (compare)
  - `--files` (detail listing)
  - `--limit <n>` / `--no-limit`

* Remove `skills/git-snapshot-workflow/scripts/link-into-repo.bash` and its
  dedicated test; keep the shared skill docs-focused without installer script.

* Tighten workflow skill guidance to default to explicit, intent-derived
  snapshot IDs instead of auto-generated IDs.

v1.0.3 (2026-02-25)

* Redesign `git-snapshot` human output for `list` and `show` to provide
  readable snapshot metadata, commit relation context, captured file inventory,
  and restore-readiness diagnostics.

* Add explicit porcelain output mode for `list` and richer porcelain records for
  `show` so scripts can consume stable machine-readable fields.

* Add new inspection commands:
  - `git-snapshot diff <snapshot_id>` to inspect captured staged/unstaged/
    untracked snapshot content
  - `git-snapshot compare <snapshot_id>` to evaluate restore compatibility with
    explicit compatibility exit codes (`0` clean, `3` issues).

* Add new inspection helpers in `lib/git-snapshot/inspect.bash` for commit
  relation classification, file inventory extraction, apply-check probes,
  collision detection, and human-readable time/age formatting.

* Expand `README.md` into full operational documentation with scope/exactness
  model, command semantics, safety controls, troubleshooting guidance, and
  porcelain contract examples.

* Update workflow-skill command contract docs and add test coverage for human
  output, porcelain output, and `diff`/`compare` behaviors.

v1.0.2 (2026-02-25)

* Change snapshot storage layout to write snapshots directly under
  `~/git-snapshots/<root-most-repo-name>/<snapshot_id>` (remove the extra
  `snapshots/` sub-folder).

* Update `git-snapshot` tests and docs to match the new root-level snapshot
  directory structure.

v1.0.1 (2026-02-25)

* Fix `git-snapshot create <snapshot_id>` to preserve the explicit snapshot id
  instead of always generating an auto id.

* Add snapshot id validation for `create`, `show`, `restore`, and `delete`
  (reject empty, path-like, or invalid-character ids).

* Add regression coverage for explicit snapshot ids, duplicate-id rejection,
  and invalid-id rejection.

v1.0.0 (2026-02-25)

* Add `git-snapshot` CLI with root-most repo discovery, scoped safety guard,
  create/show/list/delete flows, and restore verification.

* Add restore safety model with typed confirmation, auto safety snapshot,
  best-effort HEAD-mismatch restore, and automatic rollback on failure.

* Add dependency-free temp-only test suite covering nested submodules,
  PWD-level scope resolution, exact restore parity, head-mismatch behavior,
  rollback behavior, and enforce-prefix protection.

* Add shared `git-snapshot-workflow` skill in `skills/` with reusable command
  contract docs and a generic repo-link helper for consumer symlink onboarding.
